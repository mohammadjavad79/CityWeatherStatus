2025-11-04 13:31:17.096 +03:30 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-04 13:31:17.188 +03:30 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-11-04 13:31:17.204 +03:30 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-11-04 10:01:17.1982462+00:00');
SELECT changes();
2025-11-04 13:31:17.289 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-11-04 13:31:17.298 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-11-04 13:31:17.301 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-11-04 13:31:17.311 +03:30 [INF] No migrations were applied. The database is already up to date.
2025-11-04 13:31:17.314 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-11-04 13:31:17.516 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c")
2025-11-04 13:31:17.623 +03:30 [INF] Now listening on: http://localhost:5134
2025-11-04 13:31:17.626 +03:30 [INF] Application started. Press Ctrl+C to shut down.
2025-11-04 13:31:17.626 +03:30 [INF] Hosting environment: Development
2025-11-04 13:31:17.626 +03:30 [INF] Content root path: /home/javad/practices/CityWeathers/CityWeathers
2025-11-04 13:31:18.200 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger - null null
2025-11-04 13:31:18.235 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger - 301 0 null 36.5022ms
2025-11-04 13:31:18.239 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger/index.html - null null
2025-11-04 13:31:18.355 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger/index.html - 200 null text/html;charset=utf-8 115.9456ms
2025-11-04 13:31:18.469 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger/v1/swagger.json - null null
2025-11-04 13:31:18.555 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 86.1312ms
2025-11-04 13:31:20.295 +03:30 [INF] Application is shutting down...
2025-11-04 13:31:27.302 +03:30 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-04 13:31:27.394 +03:30 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-11-04 13:31:27.407 +03:30 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-11-04 10:01:27.4026174+00:00');
SELECT changes();
2025-11-04 13:31:27.477 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-11-04 13:31:27.483 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-11-04 13:31:27.487 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-11-04 13:31:27.495 +03:30 [INF] No migrations were applied. The database is already up to date.
2025-11-04 13:31:27.497 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-11-04 13:31:27.756 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c")
2025-11-04 13:31:27.978 +03:30 [INF] Now listening on: http://localhost:5134
2025-11-04 13:31:27.982 +03:30 [INF] Application started. Press Ctrl+C to shut down.
2025-11-04 13:31:27.983 +03:30 [INF] Hosting environment: Development
2025-11-04 13:31:27.983 +03:30 [INF] Content root path: /home/javad/practices/CityWeathers/CityWeathers
2025-11-04 13:31:28.600 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger - null null
2025-11-04 13:31:28.651 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger - 301 0 null 53.2415ms
2025-11-04 13:31:28.661 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger/index.html - null null
2025-11-04 13:31:28.802 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger/index.html - 200 null text/html;charset=utf-8 140.8632ms
2025-11-04 13:31:28.920 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger/v1/swagger.json - null null
2025-11-04 13:31:29.018 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 98.9429ms
2025-11-04 13:31:37.964 +03:30 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-04 13:31:38.052 +03:30 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-11-04 13:31:38.064 +03:30 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-11-04 10:01:38.0603858+00:00');
SELECT changes();
2025-11-04 13:31:38.139 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-11-04 13:31:38.158 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-11-04 13:31:38.166 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-11-04 13:31:38.188 +03:30 [INF] No migrations were applied. The database is already up to date.
2025-11-04 13:31:38.193 +03:30 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-11-04 13:31:38.530 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c")
2025-11-04 13:31:38.755 +03:30 [INF] Now listening on: http://localhost:5134
2025-11-04 13:31:38.760 +03:30 [INF] Application started. Press Ctrl+C to shut down.
2025-11-04 13:31:38.761 +03:30 [INF] Hosting environment: Development
2025-11-04 13:31:38.761 +03:30 [INF] Content root path: /home/javad/practices/CityWeathers/CityWeathers
2025-11-04 13:31:39.412 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger - null null
2025-11-04 13:31:39.477 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger - 301 0 null 65.7104ms
2025-11-04 13:31:39.486 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger/index.html - null null
2025-11-04 13:31:39.635 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger/index.html - 200 null text/html;charset=utf-8 149.215ms
2025-11-04 13:31:39.756 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger/v1/swagger.json - null null
2025-11-04 13:31:39.880 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 124.8375ms
2025-11-04 13:31:53.731 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/Weather?Name=Tehran - null null
2025-11-04 13:31:53.737 +03:30 [WRN] Failed to determine the https port for redirect.
2025-11-04 13:31:53.741 +03:30 [INF] Executing endpoint 'CityWeathers.Controllers.WeatherController.Get (CityWeathers)'
2025-11-04 13:31:53.770 +03:30 [INF] Route matched with {action = "Get", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityWeathers.Dtos.Api.GetCityWeatherResponseDto]] Get(CityWeathers.Dtos.ApiRequest.GetCityWeatherRequestDto) on controller CityWeathers.Controllers.WeatherController (CityWeathers).
2025-11-04 13:31:53.830 +03:30 [INF] Executing action method CityWeathers.Controllers.WeatherController.Get (CityWeathers) - Validation state: "Valid"
2025-11-04 13:31:53.998 +03:30 [INF] Executed DbCommand (7ms) [Parameters=[@__cityName_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Code", "c"."Latitude", "c"."Longitude", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Name" = @__cityName_0
LIMIT 1
2025-11-04 13:32:09.636 +03:30 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 13:32:09.638 +03:30 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 13:32:09.688 +03:30 [INF] Executed action method CityWeathers.Controllers.WeatherController.Get (CityWeathers), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 15854.0183ms.
2025-11-04 13:32:09.696 +03:30 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-11-04 13:32:09.741 +03:30 [INF] Executed action CityWeathers.Controllers.WeatherController.Get (CityWeathers) in 15967.1397ms
2025-11-04 13:32:09.741 +03:30 [INF] Executed endpoint 'CityWeathers.Controllers.WeatherController.Get (CityWeathers)'
2025-11-04 13:32:09.745 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/Weather?Name=Tehran - 200 null application/json; charset=utf-8 16014.9571ms
2025-11-04 13:32:11.664 +03:30 [INF] Received HTTP response headers after 2018.3218ms - 200
2025-11-04 13:32:11.665 +03:30 [INF] End processing HTTP request after 2039.1662ms - 200
2025-11-04 16:15:50.160 +03:30 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-04 16:15:50.217 +03:30 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-11-04 16:15:50.224 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-11-04 12:45:50.2217596+00:00');
SELECT changes();
2025-11-04 16:15:50.270 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-11-04 16:15:50.274 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-11-04 16:15:50.276 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-11-04 16:15:50.284 +03:30 [INF] Applying migration '20251104124534_AddCityDataTable'.
2025-11-04 16:15:50.294 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "CityData" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_CityData" PRIMARY KEY AUTOINCREMENT,
    "Temperature" REAL NULL,
    "Humidity" REAL NULL,
    "WindSpeed" REAL NULL,
    "AirQuality" REAL NULL,
    "Pollutants" TEXT NOT NULL,
    "CityId" INTEGER NOT NULL,
    CONSTRAINT "FK_CityData_Cities_CityId" FOREIGN KEY ("CityId") REFERENCES "Cities" ("Id") ON DELETE CASCADE
);
2025-11-04 16:15:50.294 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_CityData_CityId" ON "CityData" ("CityId");
2025-11-04 16:15:50.294 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20251104124534_AddCityDataTable', '9.0.10');
2025-11-04 16:15:50.298 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-11-04 17:05:23.721 +03:30 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-04 17:05:23.805 +03:30 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-11-04 17:05:23.820 +03:30 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-11-04 13:35:23.8141526+00:00');
SELECT changes();
2025-11-04 17:05:23.885 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-11-04 17:05:23.895 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-11-04 17:05:23.898 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-11-04 17:05:23.908 +03:30 [INF] No migrations were applied. The database is already up to date.
2025-11-04 17:05:23.911 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-11-04 17:05:24.150 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c")
2025-11-04 17:05:24.359 +03:30 [INF] Now listening on: http://localhost:5134
2025-11-04 17:05:24.362 +03:30 [INF] Application started. Press Ctrl+C to shut down.
2025-11-04 17:05:24.363 +03:30 [INF] Hosting environment: Development
2025-11-04 17:05:24.363 +03:30 [INF] Content root path: /home/javad/practices/CityWeathers/CityWeathers
2025-11-04 17:05:24.960 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger - null null
2025-11-04 17:05:25.020 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger - 301 0 null 61.3985ms
2025-11-04 17:05:25.025 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger/index.html - null null
2025-11-04 17:05:25.172 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger/index.html - 200 null text/html;charset=utf-8 147.3055ms
2025-11-04 17:05:25.307 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger/v1/swagger.json - null null
2025-11-04 17:05:25.431 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 123.8751ms
2025-11-04 17:05:41.094 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/Weather?Name=Tehran - null null
2025-11-04 17:05:41.100 +03:30 [WRN] Failed to determine the https port for redirect.
2025-11-04 17:05:41.104 +03:30 [INF] Executing endpoint 'CityWeathers.Controllers.WeatherController.Get (CityWeathers)'
2025-11-04 17:05:41.133 +03:30 [INF] Route matched with {action = "Get", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityWeathers.Dtos.Api.GetCityWeatherResponseDto]] Get(CityWeathers.Dtos.ApiRequest.GetCityWeatherRequestDto) on controller CityWeathers.Controllers.WeatherController (CityWeathers).
2025-11-04 17:05:41.180 +03:30 [INF] Executing action method CityWeathers.Controllers.WeatherController.Get (CityWeathers) - Validation state: "Valid"
2025-11-04 17:05:41.336 +03:30 [INF] Executed DbCommand (7ms) [Parameters=[@__cityName_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Code", "c"."Latitude", "c"."Longitude", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Name" = @__cityName_0
LIMIT 1
2025-11-04 17:05:46.373 +03:30 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:05:46.376 +03:30 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:05:47.279 +03:30 [INF] Received HTTP response headers after 899.3537ms - 200
2025-11-04 17:05:47.280 +03:30 [INF] End processing HTTP request after 916.0136ms - 200
2025-11-04 17:05:47.476 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 211), @p2='?' (Size = 1123)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherApiRequests" ("CityId", "RequestJson", "ResponseJson")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-11-04 17:07:34.291 +03:30 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/air_pollution?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:07:34.291 +03:30 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/air_pollution?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:07:34.811 +03:30 [INF] Received HTTP response headers after 519.7851ms - 200
2025-11-04 17:07:34.811 +03:30 [INF] End processing HTTP request after 520.5179ms - 200
2025-11-04 17:07:34.814 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 217), @p2='?' (Size = 570)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherApiRequests" ("CityId", "RequestJson", "ResponseJson")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-11-04 17:07:34.881 +03:30 [ERR] The JSON value could not be converted to CityWeathers.Dtos.WeatherService.OpenWeatherGetCityPollutantResponseDto+PollutionDataDto. Path: $.list | LineNumber: 0 | BytePositionInLine: 47.
System.Text.Json.JsonException: The JSON value could not be converted to CityWeathers.Dtos.WeatherService.OpenWeatherGetCityPollutantResponseDto+PollutionDataDto. Path: $.list | LineNumber: 0 | BytePositionInLine: 47.
   at System.Text.Json.ThrowHelper.ThrowJsonException_DeserializeUnableToConvertValue(Type propertyType)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.ReadJsonAndSetMember(Object obj, ReadStack& state, Utf8JsonReader& reader)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Deserialize(Utf8JsonReader& reader, ReadStack& state)
   at System.Text.Json.JsonSerializer.ReadFromSpan[TValue](ReadOnlySpan`1 utf8Json, JsonTypeInfo`1 jsonTypeInfo, Nullable`1 actualByteCount)
   at System.Text.Json.JsonSerializer.ReadFromSpan[TValue](ReadOnlySpan`1 json, JsonTypeInfo`1 jsonTypeInfo)
   at System.Text.Json.JsonSerializer.Deserialize[TValue](String json, JsonSerializerOptions options)
   at CityWeathers.Services.OpenWeatherService.GetCityPollutantAsync(Int32 cityId, Decimal latitude, Decimal longitude) in /home/javad/practices/CityWeathers/CityWeathers/Services/Weather/OpenWeatherService.cs:line 133
2025-11-04 17:07:34.937 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 217), @p2='?' (Size = 2286)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherApiRequests" ("CityId", "RequestJson", "ResponseJson")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-11-04 17:07:35.051 +03:30 [INF] Executed action CityWeathers.Controllers.WeatherController.Get (CityWeathers) in 113912.4645ms
2025-11-04 17:07:35.053 +03:30 [INF] Executed endpoint 'CityWeathers.Controllers.WeatherController.Get (CityWeathers)'
2025-11-04 17:07:35.130 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/Weather?Name=Tehran - 500 null application/json; charset=utf-8 114036.5325ms
2025-11-04 17:08:04.477 +03:30 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-04 17:08:04.560 +03:30 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-11-04 17:08:04.574 +03:30 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-11-04 13:38:04.5687987+00:00');
SELECT changes();
2025-11-04 17:08:04.651 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-11-04 17:08:04.659 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-11-04 17:08:04.662 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-11-04 17:08:04.672 +03:30 [INF] No migrations were applied. The database is already up to date.
2025-11-04 17:08:04.675 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-11-04 17:08:04.902 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c")
2025-11-04 17:08:05.107 +03:30 [INF] Now listening on: http://localhost:5134
2025-11-04 17:08:05.110 +03:30 [INF] Application started. Press Ctrl+C to shut down.
2025-11-04 17:08:05.111 +03:30 [INF] Hosting environment: Development
2025-11-04 17:08:05.111 +03:30 [INF] Content root path: /home/javad/practices/CityWeathers/CityWeathers
2025-11-04 17:08:06.084 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger - null null
2025-11-04 17:08:06.145 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger - 301 0 null 62.8249ms
2025-11-04 17:08:06.150 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger/index.html - null null
2025-11-04 17:08:06.293 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger/index.html - 200 null text/html;charset=utf-8 142.9972ms
2025-11-04 17:08:06.419 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger/v1/swagger.json - null null
2025-11-04 17:08:06.528 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 108.4965ms
2025-11-04 17:08:16.311 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/Weather?Name=1 - null null
2025-11-04 17:08:16.316 +03:30 [WRN] Failed to determine the https port for redirect.
2025-11-04 17:08:16.320 +03:30 [INF] Executing endpoint 'CityWeathers.Controllers.WeatherController.Get (CityWeathers)'
2025-11-04 17:08:16.346 +03:30 [INF] Route matched with {action = "Get", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityWeathers.Dtos.Api.GetCityWeatherResponseDto]] Get(CityWeathers.Dtos.ApiRequest.GetCityWeatherRequestDto) on controller CityWeathers.Controllers.WeatherController (CityWeathers).
2025-11-04 17:08:16.397 +03:30 [INF] Executing action method CityWeathers.Controllers.WeatherController.Get (CityWeathers) - Validation state: "Valid"
2025-11-04 17:08:16.554 +03:30 [INF] Executed DbCommand (7ms) [Parameters=[@__cityName_0='?' (Size = 1)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Code", "c"."Latitude", "c"."Longitude", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Name" = @__cityName_0
LIMIT 1
2025-11-04 17:08:16.563 +03:30 [WRN] city 1 not found
2025-11-04 17:08:16.745 +03:30 [INF] Executed action CityWeathers.Controllers.WeatherController.Get (CityWeathers) in 394.003ms
2025-11-04 17:08:16.746 +03:30 [INF] Executed endpoint 'CityWeathers.Controllers.WeatherController.Get (CityWeathers)'
2025-11-04 17:08:16.838 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/Weather?Name=1 - 404 null application/json; charset=utf-8 528.1336ms
2025-11-04 17:08:24.549 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/Weather?Name=Tehran - null null
2025-11-04 17:08:24.550 +03:30 [INF] Executing endpoint 'CityWeathers.Controllers.WeatherController.Get (CityWeathers)'
2025-11-04 17:08:24.550 +03:30 [INF] Route matched with {action = "Get", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityWeathers.Dtos.Api.GetCityWeatherResponseDto]] Get(CityWeathers.Dtos.ApiRequest.GetCityWeatherRequestDto) on controller CityWeathers.Controllers.WeatherController (CityWeathers).
2025-11-04 17:08:24.554 +03:30 [INF] Executing action method CityWeathers.Controllers.WeatherController.Get (CityWeathers) - Validation state: "Valid"
2025-11-04 17:08:24.581 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[@__cityName_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Code", "c"."Latitude", "c"."Longitude", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Name" = @__cityName_0
LIMIT 1
2025-11-04 17:08:27.740 +03:30 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:08:27.742 +03:30 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:08:28.671 +03:30 [INF] Received HTTP response headers after 925.1323ms - 200
2025-11-04 17:08:28.673 +03:30 [INF] End processing HTTP request after 943.8427ms - 200
2025-11-04 17:08:28.862 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 211), @p2='?' (Size = 1123)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherApiRequests" ("CityId", "RequestJson", "ResponseJson")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-11-04 17:08:36.363 +03:30 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/air_pollution?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:08:36.363 +03:30 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/air_pollution?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:08:36.483 +03:30 [INF] Received HTTP response headers after 119.9895ms - 200
2025-11-04 17:08:36.484 +03:30 [INF] End processing HTTP request after 120.8783ms - 200
2025-11-04 17:08:36.487 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 217), @p2='?' (Size = 570)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherApiRequests" ("CityId", "RequestJson", "ResponseJson")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-11-04 17:08:36.535 +03:30 [ERR] The JSON value could not be converted to CityWeathers.Dtos.WeatherService.OpenWeatherGetCityPollutantResponseDto+PollutionDataDto. Path: $.list | LineNumber: 0 | BytePositionInLine: 47.
System.Text.Json.JsonException: The JSON value could not be converted to CityWeathers.Dtos.WeatherService.OpenWeatherGetCityPollutantResponseDto+PollutionDataDto. Path: $.list | LineNumber: 0 | BytePositionInLine: 47.
   at System.Text.Json.ThrowHelper.ThrowJsonException_DeserializeUnableToConvertValue(Type propertyType)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.ReadJsonAndSetMember(Object obj, ReadStack& state, Utf8JsonReader& reader)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Deserialize(Utf8JsonReader& reader, ReadStack& state)
   at System.Text.Json.JsonSerializer.ReadFromSpan[TValue](ReadOnlySpan`1 utf8Json, JsonTypeInfo`1 jsonTypeInfo, Nullable`1 actualByteCount)
   at System.Text.Json.JsonSerializer.ReadFromSpan[TValue](ReadOnlySpan`1 json, JsonTypeInfo`1 jsonTypeInfo)
   at System.Text.Json.JsonSerializer.Deserialize[TValue](String json, JsonSerializerOptions options)
   at CityWeathers.Services.OpenWeatherService.GetCityPollutantAsync(Int32 cityId, Decimal latitude, Decimal longitude) in /home/javad/practices/CityWeathers/CityWeathers/Services/Weather/OpenWeatherService.cs:line 133
2025-11-04 17:08:36.583 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 217), @p2='?' (Size = 2286)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherApiRequests" ("CityId", "RequestJson", "ResponseJson")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-11-04 17:08:36.687 +03:30 [INF] Executed action CityWeathers.Controllers.WeatherController.Get (CityWeathers) in 12136.6542ms
2025-11-04 17:08:36.689 +03:30 [INF] Executed endpoint 'CityWeathers.Controllers.WeatherController.Get (CityWeathers)'
2025-11-04 17:08:36.744 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/Weather?Name=Tehran - 500 null application/json; charset=utf-8 12195.3939ms
2025-11-04 17:12:23.322 +03:30 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-04 17:12:23.410 +03:30 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-11-04 17:12:23.423 +03:30 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-11-04 13:42:23.4182305+00:00');
SELECT changes();
2025-11-04 17:12:23.494 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-11-04 17:12:23.500 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-11-04 17:12:23.503 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-11-04 17:12:23.513 +03:30 [INF] No migrations were applied. The database is already up to date.
2025-11-04 17:12:23.516 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-11-04 17:12:23.751 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c")
2025-11-04 17:12:23.957 +03:30 [INF] Now listening on: http://localhost:5134
2025-11-04 17:12:23.961 +03:30 [INF] Application started. Press Ctrl+C to shut down.
2025-11-04 17:12:23.962 +03:30 [INF] Hosting environment: Development
2025-11-04 17:12:23.962 +03:30 [INF] Content root path: /home/javad/practices/CityWeathers/CityWeathers
2025-11-04 17:12:24.770 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger - null null
2025-11-04 17:12:24.832 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger - 301 0 null 63.6192ms
2025-11-04 17:12:24.843 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger/index.html - null null
2025-11-04 17:12:24.985 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger/index.html - 200 null text/html;charset=utf-8 141.7831ms
2025-11-04 17:12:25.103 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger/v1/swagger.json - null null
2025-11-04 17:12:25.216 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 113.0201ms
2025-11-04 17:12:39.181 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/Weather?Name=Tehran - null null
2025-11-04 17:12:39.186 +03:30 [WRN] Failed to determine the https port for redirect.
2025-11-04 17:12:39.189 +03:30 [INF] Executing endpoint 'CityWeathers.Controllers.WeatherController.Get (CityWeathers)'
2025-11-04 17:12:39.218 +03:30 [INF] Route matched with {action = "Get", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityWeathers.Dtos.Api.GetCityWeatherResponseDto]] Get(CityWeathers.Dtos.ApiRequest.GetCityWeatherRequestDto) on controller CityWeathers.Controllers.WeatherController (CityWeathers).
2025-11-04 17:12:39.266 +03:30 [INF] Executing action method CityWeathers.Controllers.WeatherController.Get (CityWeathers) - Validation state: "Valid"
2025-11-04 17:12:39.422 +03:30 [INF] Executed DbCommand (7ms) [Parameters=[@__cityName_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Code", "c"."Latitude", "c"."Longitude", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Name" = @__cityName_0
LIMIT 1
2025-11-04 17:12:42.463 +03:30 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:12:42.465 +03:30 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:12:43.325 +03:30 [INF] Received HTTP response headers after 856.5094ms - 200
2025-11-04 17:12:43.326 +03:30 [INF] End processing HTTP request after 874.135ms - 200
2025-11-04 17:12:43.505 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 211), @p2='?' (Size = 1123)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherApiRequests" ("CityId", "RequestJson", "ResponseJson")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-11-04 17:12:48.315 +03:30 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/air_pollution?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:12:48.315 +03:30 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/air_pollution?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:12:48.537 +03:30 [INF] Received HTTP response headers after 221.8458ms - 200
2025-11-04 17:12:48.538 +03:30 [INF] End processing HTTP request after 222.4908ms - 200
2025-11-04 17:12:48.541 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 217), @p2='?' (Size = 569)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherApiRequests" ("CityId", "RequestJson", "ResponseJson")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-11-04 17:39:53.770 +03:30 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-04 17:39:53.867 +03:30 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-11-04 17:39:53.880 +03:30 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-11-04 14:09:53.8747252+00:00');
SELECT changes();
2025-11-04 17:39:53.944 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-11-04 17:39:53.951 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-11-04 17:39:53.954 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-11-04 17:39:53.962 +03:30 [INF] No migrations were applied. The database is already up to date.
2025-11-04 17:39:53.965 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-11-04 17:39:54.150 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c")
2025-11-04 17:39:54.239 +03:30 [INF] Now listening on: http://localhost:5134
2025-11-04 17:39:54.241 +03:30 [INF] Application started. Press Ctrl+C to shut down.
2025-11-04 17:39:54.242 +03:30 [INF] Hosting environment: Development
2025-11-04 17:39:54.242 +03:30 [INF] Content root path: /home/javad/practices/CityWeathers/CityWeathers
2025-11-04 17:39:54.849 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger - null null
2025-11-04 17:39:54.903 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger - 301 0 null 58.4872ms
2025-11-04 17:39:54.910 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger/index.html - null null
2025-11-04 17:39:55.037 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger/index.html - 200 null text/html;charset=utf-8 127.2722ms
2025-11-04 17:39:55.162 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger/v1/swagger.json - null null
2025-11-04 17:39:55.257 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 94.7486ms
2025-11-04 17:40:10.501 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/Weather?Name=Tehran - null null
2025-11-04 17:40:10.505 +03:30 [WRN] Failed to determine the https port for redirect.
2025-11-04 17:40:10.511 +03:30 [INF] Executing endpoint 'CityWeathers.Controllers.WeatherController.Get (CityWeathers)'
2025-11-04 17:40:10.542 +03:30 [INF] Route matched with {action = "Get", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityWeathers.Dtos.Api.GetCityWeatherStatusResponseDto]] Get(CityWeathers.Dtos.ApiRequest.GetCityWeatherRequestDto) on controller CityWeathers.Controllers.WeatherController (CityWeathers).
2025-11-04 17:40:10.579 +03:30 [INF] Executing action method CityWeathers.Controllers.WeatherController.Get (CityWeathers) - Validation state: "Valid"
2025-11-04 17:40:10.736 +03:30 [INF] Executed DbCommand (6ms) [Parameters=[@__cityName_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Code", "c"."Latitude", "c"."Longitude", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Name" = @__cityName_0
LIMIT 1
2025-11-04 17:40:10.886 +03:30 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:40:10.889 +03:30 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:40:12.057 +03:30 [INF] Received HTTP response headers after 1162.3258ms - 200
2025-11-04 17:40:12.058 +03:30 [INF] End processing HTTP request after 1178.7895ms - 200
2025-11-04 17:40:12.224 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 211), @p2='?' (Size = 1123)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherApiRequests" ("CityId", "RequestJson", "ResponseJson")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-11-04 17:40:12.321 +03:30 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/air_pollution?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:40:12.321 +03:30 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/air_pollution?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:40:12.560 +03:30 [INF] Received HTTP response headers after 238.943ms - 200
2025-11-04 17:40:12.560 +03:30 [INF] End processing HTTP request after 239.5148ms - 200
2025-11-04 17:40:12.563 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 217), @p2='?' (Size = 569)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherApiRequests" ("CityId", "RequestJson", "ResponseJson")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-11-04 17:40:12.590 +03:30 [INF] Executed action method CityWeathers.Controllers.WeatherController.Get (CityWeathers), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2007.0574ms.
2025-11-04 17:40:12.602 +03:30 [WRN] No output formatter was found for content types '["text/plain"]' to write the response.
2025-11-04 17:40:12.609 +03:30 [INF] Executed action CityWeathers.Controllers.WeatherController.Get (CityWeathers) in 2062.4096ms
2025-11-04 17:40:12.610 +03:30 [INF] Executed endpoint 'CityWeathers.Controllers.WeatherController.Get (CityWeathers)'
2025-11-04 17:40:12.624 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/Weather?Name=Tehran - 406 0 null 2122.5926ms
2025-11-04 17:40:19.940 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/Weather?Name=Tehran - null null
2025-11-04 17:40:19.942 +03:30 [INF] Executing endpoint 'CityWeathers.Controllers.WeatherController.Get (CityWeathers)'
2025-11-04 17:40:19.942 +03:30 [INF] Route matched with {action = "Get", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityWeathers.Dtos.Api.GetCityWeatherStatusResponseDto]] Get(CityWeathers.Dtos.ApiRequest.GetCityWeatherRequestDto) on controller CityWeathers.Controllers.WeatherController (CityWeathers).
2025-11-04 17:40:19.945 +03:30 [INF] Executing action method CityWeathers.Controllers.WeatherController.Get (CityWeathers) - Validation state: "Valid"
2025-11-04 17:40:19.998 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[@__cityName_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Code", "c"."Latitude", "c"."Longitude", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Name" = @__cityName_0
LIMIT 1
2025-11-04 17:40:19.999 +03:30 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:40:19.999 +03:30 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:40:20.242 +03:30 [INF] Received HTTP response headers after 242.1181ms - 200
2025-11-04 17:40:20.242 +03:30 [INF] End processing HTTP request after 242.7591ms - 200
2025-11-04 17:40:20.244 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 211), @p2='?' (Size = 1123)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherApiRequests" ("CityId", "RequestJson", "ResponseJson")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-11-04 17:40:20.249 +03:30 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/air_pollution?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:40:20.249 +03:30 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/air_pollution?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:40:20.447 +03:30 [INF] Received HTTP response headers after 197.7653ms - 200
2025-11-04 17:40:20.447 +03:30 [INF] End processing HTTP request after 198.3871ms - 200
2025-11-04 17:40:20.449 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 217), @p2='?' (Size = 570)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherApiRequests" ("CityId", "RequestJson", "ResponseJson")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-11-04 17:40:20.452 +03:30 [INF] Executed action method CityWeathers.Controllers.WeatherController.Get (CityWeathers), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 506.4685ms.
2025-11-04 17:40:20.453 +03:30 [INF] Executing OkObjectResult, writing value of type 'CityWeathers.Dtos.Api.GetCityWeatherStatusResponseDto'.
2025-11-04 17:40:20.475 +03:30 [INF] Executed action CityWeathers.Controllers.WeatherController.Get (CityWeathers) in 532.8658ms
2025-11-04 17:40:20.475 +03:30 [INF] Executed endpoint 'CityWeathers.Controllers.WeatherController.Get (CityWeathers)'
2025-11-04 17:40:20.476 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/Weather?Name=Tehran - 200 null application/json; charset=utf-8 535.3275ms
2025-11-04 17:41:47.207 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/Weather?Name=Tabriz - null null
2025-11-04 17:41:47.207 +03:30 [INF] Executing endpoint 'CityWeathers.Controllers.WeatherController.Get (CityWeathers)'
2025-11-04 17:41:47.208 +03:30 [INF] Route matched with {action = "Get", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityWeathers.Dtos.Api.GetCityWeatherStatusResponseDto]] Get(CityWeathers.Dtos.ApiRequest.GetCityWeatherRequestDto) on controller CityWeathers.Controllers.WeatherController (CityWeathers).
2025-11-04 17:41:47.211 +03:30 [INF] Executing action method CityWeathers.Controllers.WeatherController.Get (CityWeathers) - Validation state: "Valid"
2025-11-04 17:41:47.215 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[@__cityName_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Code", "c"."Latitude", "c"."Longitude", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Name" = @__cityName_0
LIMIT 1
2025-11-04 17:41:47.217 +03:30 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=38.066667&lon=46.3&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:41:47.217 +03:30 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=38.066667&lon=46.3&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:41:47.700 +03:30 [INF] Received HTTP response headers after 482.6062ms - 200
2025-11-04 17:41:47.700 +03:30 [INF] End processing HTTP request after 483.4834ms - 200
2025-11-04 17:41:47.702 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 206), @p2='?' (Size = 1115)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherApiRequests" ("CityId", "RequestJson", "ResponseJson")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-11-04 17:41:47.705 +03:30 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/air_pollution?lat=38.066667&lon=46.3&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:41:47.705 +03:30 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/air_pollution?lat=38.066667&lon=46.3&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:41:47.891 +03:30 [INF] Received HTTP response headers after 185.31ms - 200
2025-11-04 17:41:47.891 +03:30 [INF] End processing HTTP request after 185.7614ms - 200
2025-11-04 17:41:47.892 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 212), @p2='?' (Size = 561)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherApiRequests" ("CityId", "RequestJson", "ResponseJson")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-11-04 17:41:47.896 +03:30 [INF] Executed action method CityWeathers.Controllers.WeatherController.Get (CityWeathers), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 684.3036ms.
2025-11-04 17:41:47.896 +03:30 [INF] Executing OkObjectResult, writing value of type 'CityWeathers.Dtos.Api.GetCityWeatherStatusResponseDto'.
2025-11-04 17:41:47.898 +03:30 [INF] Executed action CityWeathers.Controllers.WeatherController.Get (CityWeathers) in 690.1855ms
2025-11-04 17:41:47.898 +03:30 [INF] Executed endpoint 'CityWeathers.Controllers.WeatherController.Get (CityWeathers)'
2025-11-04 17:41:47.898 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/Weather?Name=Tabriz - 200 null application/json; charset=utf-8 691.5264ms
2025-11-04 17:50:50.768 +03:30 [INF] Application is shutting down...
2025-11-04 17:50:55.799 +03:30 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-04 17:50:55.904 +03:30 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-11-04 17:50:55.915 +03:30 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-11-04 14:20:55.9111493+00:00');
SELECT changes();
2025-11-04 17:50:55.976 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-11-04 17:50:55.982 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-11-04 17:50:55.984 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-11-04 17:50:55.992 +03:30 [INF] No migrations were applied. The database is already up to date.
2025-11-04 17:50:56.000 +03:30 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-11-04 17:50:56.188 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c")
2025-11-04 17:50:56.276 +03:30 [INF] Now listening on: http://localhost:5134
2025-11-04 17:50:56.279 +03:30 [INF] Application started. Press Ctrl+C to shut down.
2025-11-04 17:50:56.279 +03:30 [INF] Hosting environment: Development
2025-11-04 17:50:56.279 +03:30 [INF] Content root path: /home/javad/practices/CityWeathers/CityWeathers
2025-11-04 17:50:56.896 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger - null null
2025-11-04 17:50:56.975 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger - 301 0 null 90.6221ms
2025-11-04 17:50:56.980 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger/index.html - null null
2025-11-04 17:50:57.152 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger/index.html - 200 null text/html;charset=utf-8 171.2711ms
2025-11-04 17:50:57.343 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger/v1/swagger.json - null null
2025-11-04 17:50:57.468 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 124.6905ms
2025-11-04 17:51:10.827 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/Weather?Name=Tabriz - null null
2025-11-04 17:51:10.832 +03:30 [WRN] Failed to determine the https port for redirect.
2025-11-04 17:51:10.840 +03:30 [INF] Executing endpoint 'CityWeathers.Controllers.WeatherController.Get (CityWeathers)'
2025-11-04 17:51:10.872 +03:30 [INF] Route matched with {action = "Get", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityWeathers.Dtos.Api.GetCityWeatherStatusResponseDto]] Get(CityWeathers.Dtos.ApiRequest.GetCityWeatherRequestDto) on controller CityWeathers.Controllers.WeatherController (CityWeathers).
2025-11-04 17:51:10.906 +03:30 [INF] Executing action method CityWeathers.Controllers.WeatherController.Get (CityWeathers) - Validation state: "Valid"
2025-11-04 17:51:11.062 +03:30 [INF] Executed DbCommand (6ms) [Parameters=[@__cityName_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Code", "c"."Latitude", "c"."Longitude", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Name" = @__cityName_0
LIMIT 1
2025-11-04 17:51:11.201 +03:30 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=38.066667&lon=46.3&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:51:11.204 +03:30 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=38.066667&lon=46.3&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:51:12.225 +03:30 [INF] Received HTTP response headers after 1017.7267ms - 200
2025-11-04 17:51:12.225 +03:30 [INF] End processing HTTP request after 1031.4577ms - 200
2025-11-04 17:51:12.414 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 206), @p2='?' (Size = 1115)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherApiRequests" ("CityId", "RequestJson", "ResponseJson")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-11-04 17:51:12.525 +03:30 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/air_pollution?lat=38.066667&lon=46.3&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:51:12.525 +03:30 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/air_pollution?lat=38.066667&lon=46.3&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:51:12.794 +03:30 [INF] Received HTTP response headers after 268.9047ms - 200
2025-11-04 17:51:12.794 +03:30 [INF] End processing HTTP request after 269.5595ms - 200
2025-11-04 17:51:12.797 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 212), @p2='?' (Size = 561)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherApiRequests" ("CityId", "RequestJson", "ResponseJson")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-11-04 17:51:12.825 +03:30 [INF] Executed action method CityWeathers.Controllers.WeatherController.Get (CityWeathers), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1913.108ms.
2025-11-04 17:51:12.833 +03:30 [INF] Executing OkObjectResult, writing value of type 'CityWeathers.Dtos.Api.GetCityWeatherStatusResponseDto'.
2025-11-04 17:51:12.866 +03:30 [INF] Executed action CityWeathers.Controllers.WeatherController.Get (CityWeathers) in 1989.1354ms
2025-11-04 17:51:12.867 +03:30 [INF] Executed endpoint 'CityWeathers.Controllers.WeatherController.Get (CityWeathers)'
2025-11-04 17:51:12.877 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/Weather?Name=Tabriz - 200 null application/json; charset=utf-8 2050.3519ms
2025-11-04 17:52:02.344 +03:30 [INF] Application is shutting down...
2025-11-04 17:53:31.749 +03:30 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-04 17:53:31.858 +03:30 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-11-04 17:53:31.873 +03:30 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-11-04 14:23:31.8661331+00:00');
SELECT changes();
2025-11-04 17:53:31.949 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-11-04 17:53:31.958 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-11-04 17:53:31.961 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-11-04 17:53:31.970 +03:30 [INF] No migrations were applied. The database is already up to date.
2025-11-04 17:53:31.973 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-11-04 17:53:32.173 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c")
2025-11-04 17:53:32.268 +03:30 [INF] Now listening on: http://localhost:5134
2025-11-04 17:53:32.271 +03:30 [INF] Application started. Press Ctrl+C to shut down.
2025-11-04 17:53:32.272 +03:30 [INF] Hosting environment: Development
2025-11-04 17:53:32.272 +03:30 [INF] Content root path: /home/javad/practices/CityWeathers/CityWeathers
2025-11-04 17:53:32.794 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger - null null
2025-11-04 17:53:32.849 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger - 301 0 null 60.2689ms
2025-11-04 17:53:32.855 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger/index.html - null null
2025-11-04 17:53:32.991 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger/index.html - 200 null text/html;charset=utf-8 135.873ms
2025-11-04 17:53:33.127 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger/v1/swagger.json - null null
2025-11-04 17:53:33.251 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 123.874ms
2025-11-04 17:53:44.838 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/Weather?Name=Tabriz - null null
2025-11-04 17:53:44.846 +03:30 [WRN] Failed to determine the https port for redirect.
2025-11-04 17:53:44.865 +03:30 [INF] Executing endpoint 'CityWeathers.Controllers.WeatherController.Get (CityWeathers)'
2025-11-04 17:53:44.899 +03:30 [INF] Route matched with {action = "Get", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityWeathers.Dtos.ApiResponse.GetCityWeatherStatusResponseDto]] Get(CityWeathers.Dtos.ApiRequest.GetCityWeatherRequestDto) on controller CityWeathers.Controllers.WeatherController (CityWeathers).
2025-11-04 17:53:44.936 +03:30 [INF] Executing action method CityWeathers.Controllers.WeatherController.Get (CityWeathers) - Validation state: "Valid"
2025-11-04 17:53:45.104 +03:30 [INF] Executed DbCommand (6ms) [Parameters=[@__cityName_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Code", "c"."Latitude", "c"."Longitude", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Name" = @__cityName_0
LIMIT 1
2025-11-04 17:53:45.245 +03:30 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=38.066667&lon=46.3&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:53:45.248 +03:30 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=38.066667&lon=46.3&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:53:45.952 +03:30 [INF] Received HTTP response headers after 701.077ms - 200
2025-11-04 17:53:45.953 +03:30 [INF] End processing HTTP request after 714.3693ms - 200
2025-11-04 17:53:46.139 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 206), @p2='?' (Size = 1115)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherApiRequests" ("CityId", "RequestJson", "ResponseJson")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-11-04 17:53:46.254 +03:30 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/air_pollution?lat=38.066667&lon=46.3&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:53:46.254 +03:30 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/air_pollution?lat=38.066667&lon=46.3&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:53:46.387 +03:30 [INF] Received HTTP response headers after 133.1918ms - 200
2025-11-04 17:53:46.388 +03:30 [INF] End processing HTTP request after 133.8754ms - 200
2025-11-04 17:53:46.391 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 212), @p2='?' (Size = 561)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherApiRequests" ("CityId", "RequestJson", "ResponseJson")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-11-04 17:53:46.428 +03:30 [INF] Executed action method CityWeathers.Controllers.WeatherController.Get (CityWeathers), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1486.1663ms.
2025-11-04 17:53:46.441 +03:30 [WRN] No output formatter was found for content types '["text/plain"]' to write the response.
2025-11-04 17:53:46.452 +03:30 [INF] Executed action CityWeathers.Controllers.WeatherController.Get (CityWeathers) in 1547.2673ms
2025-11-04 17:53:46.453 +03:30 [INF] Executed endpoint 'CityWeathers.Controllers.WeatherController.Get (CityWeathers)'
2025-11-04 17:53:46.468 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/Weather?Name=Tabriz - 406 0 null 1629.4763ms
2025-11-04 17:53:49.755 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/Weather?Name=Tabriz - null null
2025-11-04 17:53:49.756 +03:30 [INF] Executing endpoint 'CityWeathers.Controllers.WeatherController.Get (CityWeathers)'
2025-11-04 17:53:49.757 +03:30 [INF] Route matched with {action = "Get", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityWeathers.Dtos.ApiResponse.GetCityWeatherStatusResponseDto]] Get(CityWeathers.Dtos.ApiRequest.GetCityWeatherRequestDto) on controller CityWeathers.Controllers.WeatherController (CityWeathers).
2025-11-04 17:53:49.760 +03:30 [INF] Executing action method CityWeathers.Controllers.WeatherController.Get (CityWeathers) - Validation state: "Valid"
2025-11-04 17:53:49.808 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[@__cityName_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Code", "c"."Latitude", "c"."Longitude", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Name" = @__cityName_0
LIMIT 1
2025-11-04 17:53:49.809 +03:30 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=38.066667&lon=46.3&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:53:49.809 +03:30 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=38.066667&lon=46.3&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:53:50.042 +03:30 [INF] Received HTTP response headers after 233.4666ms - 200
2025-11-04 17:53:50.043 +03:30 [INF] End processing HTTP request after 234.025ms - 200
2025-11-04 17:53:50.044 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 206), @p2='?' (Size = 1115)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherApiRequests" ("CityId", "RequestJson", "ResponseJson")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-11-04 17:53:50.048 +03:30 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/air_pollution?lat=38.066667&lon=46.3&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:53:50.048 +03:30 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/air_pollution?lat=38.066667&lon=46.3&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:53:50.245 +03:30 [INF] Received HTTP response headers after 196.7401ms - 200
2025-11-04 17:53:50.246 +03:30 [INF] End processing HTTP request after 197.5756ms - 200
2025-11-04 17:53:50.247 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 211), @p2='?' (Size = 561)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherApiRequests" ("CityId", "RequestJson", "ResponseJson")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-11-04 17:53:50.251 +03:30 [INF] Executed action method CityWeathers.Controllers.WeatherController.Get (CityWeathers), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 490.294ms.
2025-11-04 17:53:50.254 +03:30 [INF] Executing OkObjectResult, writing value of type 'CityWeathers.Dtos.ApiResponse.GetCityWeatherStatusResponseDto'.
2025-11-04 17:53:50.289 +03:30 [INF] Executed action CityWeathers.Controllers.WeatherController.Get (CityWeathers) in 532.3898ms
2025-11-04 17:53:50.290 +03:30 [INF] Executed endpoint 'CityWeathers.Controllers.WeatherController.Get (CityWeathers)'
2025-11-04 17:53:50.291 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/Weather?Name=Tabriz - 200 null application/json; charset=utf-8 535.3467ms
2025-11-04 17:54:02.758 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/Weather?Name=Tehran - null null
2025-11-04 17:54:02.759 +03:30 [INF] Executing endpoint 'CityWeathers.Controllers.WeatherController.Get (CityWeathers)'
2025-11-04 17:54:02.759 +03:30 [INF] Route matched with {action = "Get", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityWeathers.Dtos.ApiResponse.GetCityWeatherStatusResponseDto]] Get(CityWeathers.Dtos.ApiRequest.GetCityWeatherRequestDto) on controller CityWeathers.Controllers.WeatherController (CityWeathers).
2025-11-04 17:54:02.763 +03:30 [INF] Executing action method CityWeathers.Controllers.WeatherController.Get (CityWeathers) - Validation state: "Valid"
2025-11-04 17:54:02.764 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[@__cityName_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Code", "c"."Latitude", "c"."Longitude", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Name" = @__cityName_0
LIMIT 1
2025-11-04 17:54:02.765 +03:30 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:54:02.765 +03:30 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:54:02.946 +03:30 [INF] Received HTTP response headers after 180.8787ms - 200
2025-11-04 17:54:02.946 +03:30 [INF] End processing HTTP request after 181.3762ms - 200
2025-11-04 17:54:02.948 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 211), @p2='?' (Size = 1123)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherApiRequests" ("CityId", "RequestJson", "ResponseJson")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-11-04 17:54:02.951 +03:30 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/air_pollution?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:54:02.952 +03:30 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/air_pollution?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:54:03.150 +03:30 [INF] Received HTTP response headers after 198.3734ms - 200
2025-11-04 17:54:03.150 +03:30 [INF] End processing HTTP request after 198.7635ms - 200
2025-11-04 17:54:03.151 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 217), @p2='?' (Size = 570)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherApiRequests" ("CityId", "RequestJson", "ResponseJson")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-11-04 17:54:03.154 +03:30 [INF] Executed action method CityWeathers.Controllers.WeatherController.Get (CityWeathers), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 390.919ms.
2025-11-04 17:54:03.154 +03:30 [INF] Executing OkObjectResult, writing value of type 'CityWeathers.Dtos.ApiResponse.GetCityWeatherStatusResponseDto'.
2025-11-04 17:54:03.155 +03:30 [INF] Executed action CityWeathers.Controllers.WeatherController.Get (CityWeathers) in 395.4026ms
2025-11-04 17:54:03.155 +03:30 [INF] Executed endpoint 'CityWeathers.Controllers.WeatherController.Get (CityWeathers)'
2025-11-04 17:54:03.155 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/Weather?Name=Tehran - 200 null application/json; charset=utf-8 396.6865ms
2025-11-04 17:54:10.434 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/Weather?Name=Gorgan - null null
2025-11-04 17:54:10.435 +03:30 [INF] Executing endpoint 'CityWeathers.Controllers.WeatherController.Get (CityWeathers)'
2025-11-04 17:54:10.435 +03:30 [INF] Route matched with {action = "Get", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityWeathers.Dtos.ApiResponse.GetCityWeatherStatusResponseDto]] Get(CityWeathers.Dtos.ApiRequest.GetCityWeatherRequestDto) on controller CityWeathers.Controllers.WeatherController (CityWeathers).
2025-11-04 17:54:10.436 +03:30 [INF] Executing action method CityWeathers.Controllers.WeatherController.Get (CityWeathers) - Validation state: "Valid"
2025-11-04 17:54:10.438 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[@__cityName_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Code", "c"."Latitude", "c"."Longitude", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Name" = @__cityName_0
LIMIT 1
2025-11-04 17:54:10.439 +03:30 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=36.838611&lon=54.434444&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:54:10.439 +03:30 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=36.838611&lon=54.434444&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:54:10.786 +03:30 [INF] Received HTTP response headers after 347.4228ms - 200
2025-11-04 17:54:10.787 +03:30 [INF] End processing HTTP request after 347.8326ms - 200
2025-11-04 17:54:10.788 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 211), @p2='?' (Size = 1123)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherApiRequests" ("CityId", "RequestJson", "ResponseJson")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-11-04 17:54:10.795 +03:30 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/air_pollution?lat=36.838611&lon=54.434444&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:54:10.795 +03:30 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/air_pollution?lat=36.838611&lon=54.434444&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:54:10.949 +03:30 [INF] Received HTTP response headers after 154.2098ms - 200
2025-11-04 17:54:10.949 +03:30 [INF] End processing HTTP request after 154.6612ms - 200
2025-11-04 17:54:10.951 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 217), @p2='?' (Size = 568)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherApiRequests" ("CityId", "RequestJson", "ResponseJson")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-11-04 17:54:10.954 +03:30 [INF] Executed action method CityWeathers.Controllers.WeatherController.Get (CityWeathers), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 517.5155ms.
2025-11-04 17:54:10.954 +03:30 [INF] Executing OkObjectResult, writing value of type 'CityWeathers.Dtos.ApiResponse.GetCityWeatherStatusResponseDto'.
2025-11-04 17:54:10.954 +03:30 [INF] Executed action CityWeathers.Controllers.WeatherController.Get (CityWeathers) in 518.9178ms
2025-11-04 17:54:10.954 +03:30 [INF] Executed endpoint 'CityWeathers.Controllers.WeatherController.Get (CityWeathers)'
2025-11-04 17:54:10.955 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/Weather?Name=Gorgan - 200 null application/json; charset=utf-8 520.076ms
2025-11-04 17:55:45.147 +03:30 [INF] Application is shutting down...
2025-11-04 17:56:20.870 +03:30 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-04 17:56:20.947 +03:30 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-11-04 17:56:20.959 +03:30 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-11-04 14:26:20.9551049+00:00');
SELECT changes();
2025-11-04 17:56:21.032 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-11-04 17:56:21.038 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-11-04 17:56:21.041 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-11-04 17:56:21.049 +03:30 [INF] No migrations were applied. The database is already up to date.
2025-11-04 17:56:21.051 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-11-04 17:56:21.246 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c")
2025-11-04 17:56:21.365 +03:30 [INF] Now listening on: http://localhost:5134
2025-11-04 17:56:21.369 +03:30 [INF] Application started. Press Ctrl+C to shut down.
2025-11-04 17:56:21.369 +03:30 [INF] Hosting environment: Development
2025-11-04 17:56:21.369 +03:30 [INF] Content root path: /home/javad/practices/CityWeathers/CityWeathers
2025-11-04 17:56:21.990 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger - null null
2025-11-04 17:56:22.058 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger - 301 0 null 69.1848ms
2025-11-04 17:56:22.061 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger/index.html - null null
2025-11-04 17:56:22.188 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger/index.html - 200 null text/html;charset=utf-8 126.6368ms
2025-11-04 17:56:22.314 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger/v1/swagger.json - null null
2025-11-04 17:56:22.403 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 88.9718ms
2025-11-04 17:56:34.346 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/Weather?Name=Tehran - null null
2025-11-04 17:56:34.352 +03:30 [WRN] Failed to determine the https port for redirect.
2025-11-04 17:56:34.358 +03:30 [INF] Executing endpoint 'CityWeathers.Controllers.WeatherController.Get (CityWeathers)'
2025-11-04 17:56:34.394 +03:30 [INF] Route matched with {action = "Get", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityWeathers.Dtos.ApiResponse.GetCityWeatherStatusResponseDto]] Get(CityWeathers.Dtos.ApiRequest.GetCityWeatherRequestDto) on controller CityWeathers.Controllers.WeatherController (CityWeathers).
2025-11-04 17:56:34.438 +03:30 [INF] Executing action method CityWeathers.Controllers.WeatherController.Get (CityWeathers) - Validation state: "Valid"
2025-11-04 17:56:34.610 +03:30 [INF] Executed DbCommand (5ms) [Parameters=[@__cityName_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Code", "c"."Latitude", "c"."Longitude", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Name" = @__cityName_0
LIMIT 1
2025-11-04 17:56:34.757 +03:30 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:56:34.760 +03:30 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:56:35.457 +03:30 [INF] Received HTTP response headers after 692.5909ms - 200
2025-11-04 17:56:35.458 +03:30 [INF] End processing HTTP request after 706.8589ms - 200
2025-11-04 17:56:35.641 +03:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 211), @p2='?' (Size = 1123)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherApiRequests" ("CityId", "RequestJson", "ResponseJson")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-11-04 17:56:35.741 +03:30 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/air_pollution?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:56:35.741 +03:30 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/air_pollution?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:56:35.867 +03:30 [INF] Received HTTP response headers after 126.2058ms - 200
2025-11-04 17:56:35.867 +03:30 [INF] End processing HTTP request after 126.8718ms - 200
2025-11-04 17:56:35.872 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 217), @p2='?' (Size = 570)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherApiRequests" ("CityId", "RequestJson", "ResponseJson")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-11-04 17:56:35.897 +03:30 [INF] Executed action method CityWeathers.Controllers.WeatherController.Get (CityWeathers), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1454.9597ms.
2025-11-04 17:56:35.907 +03:30 [WRN] No output formatter was found for content types '["text/plain"]' to write the response.
2025-11-04 17:56:35.915 +03:30 [INF] Executed action CityWeathers.Controllers.WeatherController.Get (CityWeathers) in 1516.3324ms
2025-11-04 17:56:35.916 +03:30 [INF] Executed endpoint 'CityWeathers.Controllers.WeatherController.Get (CityWeathers)'
2025-11-04 17:56:35.927 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/Weather?Name=Tehran - 406 0 null 1580.7625ms
2025-11-04 17:56:40.268 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/Weather?Name=Tehran - null null
2025-11-04 17:56:40.269 +03:30 [INF] Executing endpoint 'CityWeathers.Controllers.WeatherController.Get (CityWeathers)'
2025-11-04 17:56:40.270 +03:30 [INF] Route matched with {action = "Get", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityWeathers.Dtos.ApiResponse.GetCityWeatherStatusResponseDto]] Get(CityWeathers.Dtos.ApiRequest.GetCityWeatherRequestDto) on controller CityWeathers.Controllers.WeatherController (CityWeathers).
2025-11-04 17:56:40.274 +03:30 [INF] Executing action method CityWeathers.Controllers.WeatherController.Get (CityWeathers) - Validation state: "Valid"
2025-11-04 17:56:40.336 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[@__cityName_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Code", "c"."Latitude", "c"."Longitude", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Name" = @__cityName_0
LIMIT 1
2025-11-04 17:56:40.338 +03:30 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:56:40.338 +03:30 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:56:40.561 +03:30 [INF] Received HTTP response headers after 223.2812ms - 200
2025-11-04 17:56:40.562 +03:30 [INF] End processing HTTP request after 223.9381ms - 200
2025-11-04 17:56:40.564 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 211), @p2='?' (Size = 1122)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherApiRequests" ("CityId", "RequestJson", "ResponseJson")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-11-04 17:56:40.569 +03:30 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/air_pollution?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:56:40.569 +03:30 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/air_pollution?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 17:56:40.882 +03:30 [INF] Received HTTP response headers after 312.8529ms - 200
2025-11-04 17:56:40.883 +03:30 [INF] End processing HTTP request after 314.0553ms - 200
2025-11-04 17:56:40.887 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 217), @p2='?' (Size = 570)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherApiRequests" ("CityId", "RequestJson", "ResponseJson")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-11-04 17:56:40.898 +03:30 [INF] Executed action method CityWeathers.Controllers.WeatherController.Get (CityWeathers), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 624.3298ms.
2025-11-04 17:56:40.900 +03:30 [INF] Executing OkObjectResult, writing value of type 'CityWeathers.Dtos.ApiResponse.GetCityWeatherStatusResponseDto'.
2025-11-04 17:56:40.943 +03:30 [INF] Executed action CityWeathers.Controllers.WeatherController.Get (CityWeathers) in 673.0299ms
2025-11-04 17:56:40.943 +03:30 [INF] Executed endpoint 'CityWeathers.Controllers.WeatherController.Get (CityWeathers)'
2025-11-04 17:56:40.944 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/Weather?Name=Tehran - 200 null application/json; charset=utf-8 675.6632ms
2025-11-04 17:58:44.673 +03:30 [INF] Application is shutting down...
2025-11-04 21:49:08.307 +03:30 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-04 21:49:08.429 +03:30 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-11-04 21:49:08.448 +03:30 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-11-04 18:19:08.4407517+00:00');
SELECT changes();
2025-11-04 21:49:08.543 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-11-04 21:49:08.554 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-11-04 21:49:08.559 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-11-04 21:49:08.576 +03:30 [INF] No migrations were applied. The database is already up to date.
2025-11-04 21:49:08.579 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-11-04 21:49:08.944 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c")
2025-11-04 21:49:09.156 +03:30 [INF] Now listening on: http://localhost:5134
2025-11-04 21:49:09.162 +03:30 [INF] Application started. Press Ctrl+C to shut down.
2025-11-04 21:49:09.164 +03:30 [INF] Hosting environment: Development
2025-11-04 21:49:09.164 +03:30 [INF] Content root path: /home/javad/practices/CityWeathers (copy)/CityWeathers
2025-11-04 21:49:10.884 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger - null null
2025-11-04 21:49:10.985 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger - 301 0 null 103.1309ms
2025-11-04 21:49:10.993 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger/index.html - null null
2025-11-04 21:49:11.264 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger/index.html - 200 null text/html;charset=utf-8 271.1034ms
2025-11-04 21:49:11.316 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger/swagger-ui.css - null null
2025-11-04 21:49:11.366 +03:30 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-11-04 21:49:11.368 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger/swagger-ui.css - 499 152034 text/css 52.5365ms
2025-11-04 21:49:11.541 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger/favicon-16x16.png - null null
2025-11-04 21:49:11.543 +03:30 [INF] Sending file. Request path: '/favicon-16x16.png'. Physical path: 'N/A'
2025-11-04 21:49:11.544 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger/favicon-16x16.png - 499 665 image/png 2.3086ms
2025-11-04 21:49:11.587 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger/v1/swagger.json - null null
2025-11-04 21:49:11.867 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 280.3771ms
2025-11-04 21:49:25.559 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/Weather?Name=Tehran - null null
2025-11-04 21:49:25.563 +03:30 [WRN] Failed to determine the https port for redirect.
2025-11-04 21:49:25.572 +03:30 [INF] Executing endpoint 'CityWeathers.Core.Controllers.WeatherController.Get (CityWeathers)'
2025-11-04 21:49:25.608 +03:30 [INF] Route matched with {action = "Get", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityWeathers.Core.Dtos.ApiResponse.GetCityWeatherStatusResponseDto]] Get(CityWeathers.Core.Dtos.ApiRequest.GetCityWeatherRequestDto) on controller CityWeathers.Core.Controllers.WeatherController (CityWeathers).
2025-11-04 21:49:25.663 +03:30 [INF] Executing action method CityWeathers.Core.Controllers.WeatherController.Get (CityWeathers) - Validation state: "Valid"
2025-11-04 21:49:25.834 +03:30 [INF] Executed DbCommand (8ms) [Parameters=[@__cityName_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Code", "c"."Latitude", "c"."Longitude", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Name" = @__cityName_0
LIMIT 1
2025-11-04 21:49:26.001 +03:30 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 21:49:26.004 +03:30 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 21:49:26.919 +03:30 [INF] Received HTTP response headers after 912.5102ms - 200
2025-11-04 21:49:26.920 +03:30 [INF] End processing HTTP request after 922.335ms - 200
2025-11-04 21:49:27.100 +03:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 210), @p2='?' (Size = 1122)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherApiRequests" ("CityId", "RequestJson", "ResponseJson")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-11-04 21:49:27.237 +03:30 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/air_pollution?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 21:49:27.237 +03:30 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/air_pollution?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 21:49:27.424 +03:30 [INF] Received HTTP response headers after 186.3598ms - 200
2025-11-04 21:49:27.424 +03:30 [INF] End processing HTTP request after 187.2064ms - 200
2025-11-04 21:49:27.431 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 217), @p2='?' (Size = 569)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherApiRequests" ("CityId", "RequestJson", "ResponseJson")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-11-04 21:49:27.456 +03:30 [INF] Executed action method CityWeathers.Core.Controllers.WeatherController.Get (CityWeathers), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1788.8482ms.
2025-11-04 21:49:27.466 +03:30 [INF] Executing OkObjectResult, writing value of type 'CityWeathers.Core.Dtos.ApiResponse.GetCityWeatherStatusResponseDto'.
2025-11-04 21:49:27.496 +03:30 [INF] Executed action CityWeathers.Core.Controllers.WeatherController.Get (CityWeathers) in 1882.952ms
2025-11-04 21:49:27.497 +03:30 [INF] Executed endpoint 'CityWeathers.Core.Controllers.WeatherController.Get (CityWeathers)'
2025-11-04 21:49:27.506 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/Weather?Name=Tehran - 200 null application/json; charset=utf-8 1946.7276ms
2025-11-04 23:43:12.899 +03:30 [INF] Application is shutting down...
2025-11-04 23:57:27.737 +03:30 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-04 23:57:28.006 +03:30 [INF] Executed DbCommand (66ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-11-04 23:57:28.059 +03:30 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-11-04 20:27:28.0422908+00:00');
SELECT changes();
2025-11-04 23:57:28.244 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-11-04 23:57:28.252 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-11-04 23:57:28.256 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-11-04 23:57:28.265 +03:30 [INF] No migrations were applied. The database is already up to date.
2025-11-04 23:57:28.269 +03:30 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-11-04 23:57:28.795 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c")
2025-11-04 23:57:29.045 +03:30 [INF] Now listening on: http://localhost:5134
2025-11-04 23:57:29.048 +03:30 [INF] Application started. Press Ctrl+C to shut down.
2025-11-04 23:57:29.049 +03:30 [INF] Hosting environment: Development
2025-11-04 23:57:29.050 +03:30 [INF] Content root path: /home/javad/practices/CityWeathers (copy)/CityWeathers
2025-11-04 23:57:30.466 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger - null null
2025-11-04 23:57:30.627 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger - 301 0 null 166.328ms
2025-11-04 23:57:30.640 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger/index.html - null null
2025-11-04 23:57:31.067 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger/index.html - 200 null text/html;charset=utf-8 426.9382ms
2025-11-04 23:57:31.173 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger/swagger-ui.css - null null
2025-11-04 23:57:31.266 +03:30 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-11-04 23:57:31.268 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger/swagger-ui.css - 499 152034 text/css 95.1001ms
2025-11-04 23:57:31.523 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger/favicon-16x16.png - null null
2025-11-04 23:57:31.527 +03:30 [INF] Sending file. Request path: '/favicon-16x16.png'. Physical path: 'N/A'
2025-11-04 23:57:31.528 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger/favicon-16x16.png - 499 665 image/png 4.357ms
2025-11-04 23:57:31.879 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger/v1/swagger.json - null null
2025-11-04 23:57:32.555 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 675.0375ms
2025-11-04 23:57:43.746 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/Weather?Name=Tehran - null null
2025-11-04 23:57:43.757 +03:30 [WRN] Failed to determine the https port for redirect.
2025-11-04 23:57:43.786 +03:30 [INF] Executing endpoint 'CityWeathers.Core.Controllers.WeatherController.Get (CityWeathers)'
2025-11-04 23:57:44.087 +03:30 [INF] Route matched with {action = "Get", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityWeathers.Core.Dtos.ApiResponse.GetCityWeatherStatusResponseDto]] Get(CityWeathers.Core.Dtos.ApiRequest.GetCityWeatherRequestDto) on controller CityWeathers.Core.Controllers.WeatherController (CityWeathers).
2025-11-04 23:57:44.436 +03:30 [INF] Executing action method CityWeathers.Core.Controllers.WeatherController.Get (CityWeathers) - Validation state: "Valid"
2025-11-04 23:57:44.749 +03:30 [INF] Executed DbCommand (16ms) [Parameters=[@__cityName_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Code", "c"."Latitude", "c"."Longitude", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Name" = @__cityName_0
LIMIT 1
2025-11-04 23:57:45.044 +03:30 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 23:57:45.060 +03:30 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 23:57:46.308 +03:30 [INF] Received HTTP response headers after 1242.9738ms - 200
2025-11-04 23:57:46.309 +03:30 [INF] End processing HTTP request after 1275.7887ms - 200
2025-11-04 23:57:46.946 +03:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 211), @p2='?' (Size = 1122)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherApiRequests" ("CityId", "RequestJson", "ResponseJson")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-11-04 23:57:47.825 +03:30 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/air_pollution?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 23:57:47.826 +03:30 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/air_pollution?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-04 23:57:47.965 +03:30 [INF] Received HTTP response headers after 138.7061ms - 200
2025-11-04 23:57:47.969 +03:30 [INF] End processing HTTP request after 144.1542ms - 200
2025-11-04 23:57:48.016 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 217), @p2='?' (Size = 570)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherApiRequests" ("CityId", "RequestJson", "ResponseJson")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-11-04 23:57:48.115 +03:30 [INF] Executed action method CityWeathers.Core.Controllers.WeatherController.Get (CityWeathers), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3668.9363ms.
2025-11-04 23:57:48.159 +03:30 [INF] Executing OkObjectResult, writing value of type 'CityWeathers.Core.Dtos.ApiResponse.GetCityWeatherStatusResponseDto'.
2025-11-04 23:57:48.301 +03:30 [INF] Executed action CityWeathers.Core.Controllers.WeatherController.Get (CityWeathers) in 4193.8324ms
2025-11-04 23:57:48.303 +03:30 [INF] Executed endpoint 'CityWeathers.Core.Controllers.WeatherController.Get (CityWeathers)'
2025-11-04 23:57:48.350 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/Weather?Name=Tehran - 200 null application/json; charset=utf-8 4601.0629ms
