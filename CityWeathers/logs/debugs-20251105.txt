2025-11-05 00:03:22.396 +03:30 [INF] Application is shutting down...
2025-11-05 00:10:53.169 +03:30 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-05 00:10:53.287 +03:30 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-11-05 00:10:53.312 +03:30 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-11-04 20:40:53.3025201+00:00');
SELECT changes();
2025-11-05 00:10:53.453 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-11-05 00:10:53.469 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-11-05 00:10:53.473 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-11-05 00:10:53.491 +03:30 [INF] No migrations were applied. The database is already up to date.
2025-11-05 00:10:53.496 +03:30 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-11-05 00:10:54.091 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c")
2025-11-05 00:10:54.329 +03:30 [INF] Now listening on: http://localhost:5134
2025-11-05 00:10:54.334 +03:30 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 00:10:54.340 +03:30 [INF] Hosting environment: Development
2025-11-05 00:10:54.341 +03:30 [INF] Content root path: /home/javad/practices/CityWeatherStatus/CityWeatherStatus/CityWeathers
2025-11-05 00:10:56.360 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger - null null
2025-11-05 00:10:56.462 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger - 301 0 null 104.9962ms
2025-11-05 00:10:56.475 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger/index.html - null null
2025-11-05 00:10:56.692 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger/index.html - 200 null text/html;charset=utf-8 216.6719ms
2025-11-05 00:10:56.980 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger/favicon-16x16.png - null null
2025-11-05 00:10:57.018 +03:30 [INF] Sending file. Request path: '/favicon-16x16.png'. Physical path: 'N/A'
2025-11-05 00:10:57.019 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger/favicon-16x16.png - 499 665 image/png 39.4842ms
2025-11-05 00:10:57.068 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger/v1/swagger.json - null null
2025-11-05 00:10:57.278 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 209.4604ms
2025-11-05 00:11:49.898 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/Weather?Name=Tehran - null null
2025-11-05 00:11:49.902 +03:30 [WRN] Failed to determine the https port for redirect.
2025-11-05 00:11:49.911 +03:30 [INF] Executing endpoint 'CityWeathers.Core.Controllers.WeatherController.Get (CityWeathers)'
2025-11-05 00:11:49.952 +03:30 [INF] Route matched with {action = "Get", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityWeathers.Core.Dtos.ApiResponse.GetCityWeatherStatusResponseDto]] Get(CityWeathers.Core.Dtos.ApiRequest.GetCityWeatherRequestDto) on controller CityWeathers.Core.Controllers.WeatherController (CityWeathers).
2025-11-05 00:11:50.005 +03:30 [INF] Executing action method CityWeathers.Core.Controllers.WeatherController.Get (CityWeathers) - Validation state: "Valid"
2025-11-05 00:11:50.210 +03:30 [INF] Executed DbCommand (7ms) [Parameters=[@__cityName_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Code", "c"."Latitude", "c"."Longitude", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Name" = @__cityName_0
LIMIT 1
2025-11-05 00:11:50.376 +03:30 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-05 00:11:50.381 +03:30 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-05 00:11:51.356 +03:30 [INF] Received HTTP response headers after 971.7049ms - 200
2025-11-05 00:11:51.357 +03:30 [INF] End processing HTTP request after 984.0992ms - 200
2025-11-05 00:11:51.540 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 211), @p2='?' (Size = 1122)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherApiRequests" ("CityId", "RequestJson", "ResponseJson")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-11-05 00:11:51.649 +03:30 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/air_pollution?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-05 00:11:51.649 +03:30 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/air_pollution?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-05 00:11:51.867 +03:30 [INF] Received HTTP response headers after 218.2504ms - 200
2025-11-05 00:11:51.868 +03:30 [INF] End processing HTTP request after 218.9079ms - 200
2025-11-05 00:11:51.872 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 217), @p2='?' (Size = 569)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherApiRequests" ("CityId", "RequestJson", "ResponseJson")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-11-05 00:11:51.899 +03:30 [INF] Executed action method CityWeathers.Core.Controllers.WeatherController.Get (CityWeathers), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1888.8454ms.
2025-11-05 00:11:51.909 +03:30 [INF] Executing OkObjectResult, writing value of type 'CityWeathers.Core.Dtos.ApiResponse.GetCityWeatherStatusResponseDto'.
2025-11-05 00:11:51.942 +03:30 [INF] Executed action CityWeathers.Core.Controllers.WeatherController.Get (CityWeathers) in 1982.9539ms
2025-11-05 00:11:51.943 +03:30 [INF] Executed endpoint 'CityWeathers.Core.Controllers.WeatherController.Get (CityWeathers)'
2025-11-05 00:11:51.954 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/Weather?Name=Tehran - 200 null application/json; charset=utf-8 2055.7ms
2025-11-05 00:12:08.275 +03:30 [INF] Application is shutting down...
2025-11-05 00:29:39.092 +03:30 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-05 00:29:39.176 +03:30 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-11-05 00:29:39.189 +03:30 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-11-04 20:59:39.1842461+00:00');
SELECT changes();
2025-11-05 00:29:39.255 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-11-05 00:29:39.263 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-11-05 00:29:39.265 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-11-05 00:29:39.274 +03:30 [INF] No migrations were applied. The database is already up to date.
2025-11-05 00:29:39.276 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-11-05 00:29:39.477 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c")
2025-11-05 00:29:39.592 +03:30 [INF] Now listening on: http://localhost:5134
2025-11-05 00:29:39.595 +03:30 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 00:29:39.596 +03:30 [INF] Hosting environment: Development
2025-11-05 00:29:39.596 +03:30 [INF] Content root path: /home/javad/practices/CityWeatherStatus/CityWeatherStatus/CityWeathers
2025-11-05 00:29:41.462 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger - null null
2025-11-05 00:29:41.519 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger - 301 0 null 57.7017ms
2025-11-05 00:29:41.523 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger/index.html - null null
2025-11-05 00:29:41.646 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger/index.html - 200 null text/html;charset=utf-8 122.734ms
2025-11-05 00:29:41.678 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger/swagger-ui.css - null null
2025-11-05 00:29:41.716 +03:30 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-11-05 00:29:41.717 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger/swagger-ui.css - 499 152034 text/css 38.6429ms
2025-11-05 00:29:41.829 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/swagger/v1/swagger.json - null null
2025-11-05 00:29:41.936 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 107.8388ms
2025-11-05 00:29:54.977 +03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5134/Weather?Name=Tehran - null null
2025-11-05 00:29:54.981 +03:30 [WRN] Failed to determine the https port for redirect.
2025-11-05 00:29:54.994 +03:30 [INF] Executing endpoint 'CityWeathers.Core.Controllers.WeatherController.Get (CityWeathers)'
2025-11-05 00:29:55.036 +03:30 [INF] Route matched with {action = "Get", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityWeathers.Core.Dtos.ApiResponse.GetCityWeatherStatusResponseDto]] Get(CityWeathers.Core.Dtos.ApiRequest.GetCityWeatherRequestDto) on controller CityWeathers.Core.Controllers.WeatherController (CityWeathers).
2025-11-05 00:29:55.084 +03:30 [INF] Executing action method CityWeathers.Core.Controllers.WeatherController.Get (CityWeathers) - Validation state: "Valid"
2025-11-05 00:29:55.274 +03:30 [INF] Executed DbCommand (12ms) [Parameters=[@__cityName_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Code", "c"."Latitude", "c"."Longitude", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Name" = @__cityName_0
LIMIT 1
2025-11-05 00:29:55.433 +03:30 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-05 00:29:55.436 +03:30 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-05 00:29:56.365 +03:30 [INF] Received HTTP response headers after 926.6729ms - 200
2025-11-05 00:29:56.366 +03:30 [INF] End processing HTTP request after 935.9308ms - 200
2025-11-05 00:29:56.557 +03:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 211), @p2='?' (Size = 1122)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherApiRequests" ("CityId", "RequestJson", "ResponseJson")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-11-05 00:29:56.664 +03:30 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/air_pollution?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-05 00:29:56.664 +03:30 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/air_pollution?lat=35.689167&lon=51.388889&appid=ed21f30a2d06afa331beb1cef646ab51
2025-11-05 00:29:56.869 +03:30 [INF] Received HTTP response headers after 205.0491ms - 200
2025-11-05 00:29:56.870 +03:30 [INF] End processing HTTP request after 205.7506ms - 200
2025-11-05 00:29:56.873 +03:30 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 217), @p2='?' (Size = 569)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherApiRequests" ("CityId", "RequestJson", "ResponseJson")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-11-05 00:29:56.929 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Double), @p1='?' (DbType = Int32), @p2='?' (DbType = Double), @p3='?' (Size = 94), @p4='?' (DbType = Double), @p5='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CityData" ("AirQuality", "CityId", "Humidity", "Pollutants", "Temperature", "WindSpeed")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING "Id";
2025-11-05 00:29:56.942 +03:30 [INF] Executed action method CityWeathers.Core.Controllers.WeatherController.Get (CityWeathers), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1853.4365ms.
2025-11-05 00:29:56.952 +03:30 [INF] Executing OkObjectResult, writing value of type 'CityWeathers.Core.Dtos.ApiResponse.GetCityWeatherStatusResponseDto'.
2025-11-05 00:29:56.987 +03:30 [INF] Executed action CityWeathers.Core.Controllers.WeatherController.Get (CityWeathers) in 1945.2475ms
2025-11-05 00:29:56.989 +03:30 [INF] Executed endpoint 'CityWeathers.Core.Controllers.WeatherController.Get (CityWeathers)'
2025-11-05 00:29:56.999 +03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5134/Weather?Name=Tehran - 200 null application/json; charset=utf-8 2022.4115ms
2025-11-05 00:32:12.025 +03:30 [INF] Application is shutting down...
